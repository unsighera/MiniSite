@using MiniSite.Data
@inject UsersClass UsersClass
@page "/reg";

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogIn</title>
</head>
<body>
    <div class="RegBox">
        <h3>Log In</h3>
        <div class="Inputs">
            <div class="UserBox">
                <label>User name</label>
                <input class="inputfield" type="text" @bind="@enteredLogin">
            </div>
            <div class="LoginBox">
                <label>Login</label>
                <input class="inputfield" type="text" @bind="@enteredLogin">
            </div>
            <div class="PasswordBox">
                <label>Password</label>
                <input class="inputfield" type="text" @bind="@enteredPassword">
            </div>
        </div>
        <div class="regbuttons">
            <button @onclick="RegistraionButton">Sign In</button>
        </div>
    </div>
</body>
</html>

@if (showSuccessModal)
{
    <div class="modal" style="display:block;")">
        <div class="modal-content">
            <span class="close" @onclick="()=>showSuccessModal = false">&times;</span>
            <p>Вы успешно зарегистрировались!</p>
        </div>
    </div>
}

@if (showModal)
{
    <div class="modal" tabindex="-1" style="display:block;">
        <div class="modal-dialog">
            <div class="modal-content">
                <p>Такой пользователь уже существует</p>
            </div>
        </div>
    </div>
}

@code {
    [Parameter] public List<User> UsersList { get; set; } = new();
    [Inject] NavigationManager NavigationManager { get; set; }
    private bool showSuccessModal = false;
    private bool showModal = false;
    string enteredLogin = "";
    string enteredPassword = "";
    string userName = "";

    private void RegistraionButton()
    {
        // foreach (var user in UsersList)
        // {
        //     if (user.Login == enteredLogin)
        //     {
        //         showModal = true;
        //         return;
        //     }
        //     else
        //     {
                UsersClass.userList.Add(new User(enteredLogin, enteredPassword, userName));
                showSuccessModal = true;
                NavigationManager.NavigateTo("/");
        //     }
        // }
    }
}